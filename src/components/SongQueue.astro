---
import { getQueueBySlug } from '../controllers/queueController'
import QueueItem from './QueueItem.astro'

interface Props {
  slug: string,
  userName: string
}

const { slug, userName } = Astro.props

const queue = await getQueueBySlug(slug)
---

<ol class="songQueue">
  {queue.map((item, index) => {
    return item.hidden 
    ? null 
    : <QueueItem 
        songId={item.song_id}
        addedBy={item.added_by}
        priority={item.priority}
        position={index + 1}
      />
  })}
</ol>

<style>
  .songQueue {
    list-style-type: none;
    padding: 0;
  }
</style>