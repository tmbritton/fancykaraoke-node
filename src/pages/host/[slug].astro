---
import HostLayout from '../../layouts/HostLayout.astro';
import AddSongsToQueue from '../../components/AddSongsToQueue.astro';
import { getPartyBySlug } from '../../controllers/partyController';
import { getQueueByPartyId } from '../../controllers/queueController';

const { slug } = Astro.params;
const party = await getPartyBySlug(slug as string)
const queue = await getQueueByPartyId(slug as string)

---

<HostLayout
  title={`${party?.name} | Host Party | Fancy Karaoke`}
  partyId={slug as string}
>
  {!party && `No party found with party id ${slug}!`}
  {party && !queue.length && <AddSongsToQueue partyId={slug as string} />}
  {party && queue.length && 'Play some songs!'}
</HostLayout>
